## ğŸ—ï¸ ä»“å‚¨å®ç°ç”Ÿæˆå™¨è®¾è®¡æ–¹æ¡ˆ

### å·¥å…·å®šä½

**åç§°**ï¼š`repository_implementation_generator`ï¼ˆä»“å‚¨å®ç°ç”Ÿæˆå™¨ï¼‰

**æ ¸å¿ƒåŠŸèƒ½**ï¼šåŸºäºé¢†åŸŸå±‚ä»“å‚¨æ¥å£ï¼ˆ`IXxxRepository`ï¼‰+ Drizzle Schema åˆ†æç»“æœï¼Œè‡ªåŠ¨ç”ŸæˆåŸºç¡€è®¾æ–½å±‚çš„ä»“å‚¨å®ç°éª¨æ¶ä»£ç ã€‚

### è®¾è®¡åŸåˆ™

1. **å¤ç”¨ç°æœ‰åˆ†æå™¨** - å¯ä¸ `ddd_domain_aggregate_analyzer` é…åˆä½¿ç”¨
2. **åˆ†æä¸ç”Ÿæˆåˆ†ç¦»** - åˆ†æå™¨è´Ÿè´£æå–ä¿¡æ¯ï¼Œç”Ÿæˆå™¨è´Ÿè´£æ¸²æŸ“æ¨¡æ¿
3. **æ¨¡æ¿é©±åŠ¨** - æ¯ç§æ–‡ä»¶ç±»å‹æœ‰ç‹¬ç«‹çš„æ¨¡æ¿æ¸²æŸ“å™¨
4. **å ä½æ ‡è¯†** - ç”Ÿæˆæ–‡ä»¶ä½¿ç”¨ `.keep` åç¼€ï¼Œå®Œå–„åç§»é™¤

---

### ç›®å½•ç»“æ„

```
åŸºç¡€è®¾æ–½å±‚éª¨æ¶ç”Ÿæˆ/
â”œâ”€â”€ index.tool.ts              # MCP å·¥å…·å…¥å£
â”œâ”€â”€ æ¶æ„è®¾è®¡.md                 # æœ¬è®¾è®¡æ–‡æ¡£
â”œâ”€â”€ test.ts                    # æµ‹è¯•æ–‡ä»¶
â”œâ”€â”€ types/
â”‚   â”œâ”€â”€ index.ts               # ç±»å‹å¯¼å‡ºå…¥å£
â”‚   â”œâ”€â”€ input.schema.ts        # è¾“å…¥ Schema
â”‚   â””â”€â”€ output.schema.ts       # è¾“å‡º Schema
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ index.ts               # å¯¼å‡ºå…¥å£
â”‚   â”œâ”€â”€ generator.ts           # æ ¸å¿ƒç”Ÿæˆå™¨ï¼ˆç¼–æ’ï¼‰
â”‚   â”œâ”€â”€ file-writer.ts         # æ–‡ä»¶å†™å…¥å™¨
â”‚   â””â”€â”€ errors.ts              # é”™è¯¯ç±»å‹
â”œâ”€â”€ templates/
â”‚   â”œâ”€â”€ index.ts               # æ¨¡æ¿å¯¼å‡ºå…¥å£
â”‚   â”œâ”€â”€ mutation.template.ts   # Mutation æ¨¡æ¿
â”‚   â”œâ”€â”€ query.template.ts      # Query æ¨¡æ¿
â”‚   â”œâ”€â”€ mapper.template.ts     # Mapper æ¨¡æ¿
â”‚   â”œâ”€â”€ repository.template.ts # Repository å®ç°æ¨¡æ¿
â”‚   â””â”€â”€ barrel.template.ts     # index.ts æ¨¡æ¿
â””â”€â”€ utils/
    â”œâ”€â”€ index.ts               # å·¥å…·å¯¼å‡ºå…¥å£
    â””â”€â”€ naming.ts              # å‘½åè½¬æ¢å·¥å…·
```

---

### è¾“å…¥å‚æ•°

```typescript
interface GeneratorInput {
  /** é¢†åŸŸç›®å½•è·¯å¾„ï¼ˆå«ä»“å‚¨æ¥å£ï¼‰ */
  domainPath: string;
  
  /** è¾“å‡ºç›®å½•è·¯å¾„ï¼ˆç”Ÿæˆæ–‡ä»¶çš„ä½ç½®ï¼‰ */
  outputPath: string;
  
  /** Drizzle Schema è·¯å¾„ï¼ˆå¯é€‰ï¼Œç”¨äºå…³è”è¡¨ä¿¡æ¯ï¼‰ */
  schemaPath?: string;
  
  /** èšåˆåç§°ï¼ˆå¯é€‰ï¼Œè‡ªåŠ¨ä»ç›®å½•æ¨æ–­ï¼‰ */
  aggregateName?: string;
  
  /** è¡¨å˜é‡åæ˜ å°„ï¼ˆå¯é€‰ï¼‰ */
  tableMapping?: { variableName: string; importPath: string }[];
  
  /** ç”Ÿæˆé€‰é¡¹ */
  options?: {
    overwrite?: boolean;  // æ˜¯å¦è¦†ç›–ï¼Œé»˜è®¤ false
    suffix?: string;      // æ–‡ä»¶åç¼€ï¼Œé»˜è®¤ ".keep"
    dryRun?: boolean;     // é¢„è§ˆæ¨¡å¼
  };
}
```

---

### è¾“å‡ºç»“æœ

```typescript
interface GeneratorOutput {
  aggregateName: string;
  outputPath: string;
  generatedFiles: {
    filePath: string;
    type: "mutation" | "query" | "mapper" | "repository" | "barrel";
    status: "created" | "skipped" | "overwritten";
    methodName?: string;
  }[];
  summary: {
    mutations: number;
    queries: number;
    totalFiles: number;
    skipped: number;
  };
}
```

---

### ç”Ÿæˆæ–‡ä»¶ç»“æ„

```
{outputPath}/
â”œâ”€â”€ index.ts.keep                   # Barrel å¯¼å‡º
â”œâ”€â”€ {aggregate}.repository.ts.keep  # Repository å®ç°ç±»
â”œâ”€â”€ {aggregate}.mapper.ts.keep      # Mapper è½¬æ¢å™¨
â”œâ”€â”€ mutations/
â”‚   â”œâ”€â”€ index.ts.keep
â”‚   â”œâ”€â”€ save.mutation.ts.keep
â”‚   â””â”€â”€ delete.mutation.ts.keep
â””â”€â”€ queries/
    â”œâ”€â”€ index.ts.keep
    â”œâ”€â”€ find-by-id.query.ts.keep
    â”œâ”€â”€ find-by-username.query.ts.keep
    â””â”€â”€ exists-by-email.query.ts.keep
```

---

### æ–¹æ³•åˆ†ç±»ç­–ç•¥

| å‰ç¼€/æ¨¡å¼ | åˆ†ç±» | æ–‡ä»¶å‘½åç¤ºä¾‹ |
|----------|------|-------------|
| `save`, `create`, `insert`, `upsert` | Mutation | `save.mutation.ts` |
| `update`, `patch`, `modify` | Mutation | `update.mutation.ts` |
| `delete`, `remove`, `softDelete` | Mutation | `delete.mutation.ts` |
| `find`, `get`, `fetch` | Query | `find-by-id.query.ts` |
| `list`, `search`, `paginate` | Query | `find-paginated.query.ts` |
| `exists`, `check`, `has` | Query | `exists-by-email.query.ts` |
| `count` | Query | `count-users.query.ts` |

---

### å·¥ä½œæµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     1. è¾“å…¥éªŒè¯                               â”‚
â”‚  - æ£€æŸ¥ domainPath å­˜åœ¨                                       â”‚
â”‚  - æŸ¥æ‰¾ä»“å‚¨æ¥å£æ–‡ä»¶                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  2. è§£æä»“å‚¨æ¥å£                              â”‚
â”‚  - ä½¿ç”¨æ­£åˆ™æå–æ–¹æ³•ç­¾å                                       â”‚
â”‚  - è§£æå‚æ•°ã€è¿”å›ç±»å‹ã€JSDoc                                  â”‚
â”‚  - åˆ†ç±»ä¸º Mutation æˆ– Query                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     3. æ„å»ºç”Ÿæˆä¸Šä¸‹æ–‡                          â”‚
â”‚  - æ¨æ–­èšåˆåç§°                                               â”‚
â”‚  - è®¡ç®—ç›¸å¯¹å¯¼å…¥è·¯å¾„                                           â”‚
â”‚  - å‡†å¤‡æ¨¡æ¿å˜é‡                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      4. æ¨¡æ¿æ¸²æŸ“                              â”‚
â”‚  - éå† mutations ç”Ÿæˆ Mutation æ–‡ä»¶                          â”‚
â”‚  - éå† queries ç”Ÿæˆ Query æ–‡ä»¶                               â”‚
â”‚  - ç”Ÿæˆ Mapperã€Repositoryã€Barrel æ–‡ä»¶                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      5. æ–‡ä»¶å†™å…¥                              â”‚
â”‚  - æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼ˆoverwrite æ§åˆ¶ï¼‰                          â”‚
â”‚  - å†™å…¥ .ts.keep æ–‡ä»¶                                         â”‚
â”‚  - è®°å½•ç”ŸæˆçŠ¶æ€                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ä½¿ç”¨ç¤ºä¾‹

```typescript
// MCP è°ƒç”¨
{
  "name": "repository_implementation_generator",
  "arguments": {
    "domainPath": "/path/to/domain/user",
    "outputPath": "/path/to/infrastructure/repositories/user-repository",
    "options": {
      "dryRun": false,
      "suffix": ".keep"
    }
  }
}
```

---

### ä¸ç°æœ‰å·¥å…·çš„å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ddd_domain_aggregate_analyzer     â”‚  â† åˆ†æé¢†åŸŸç›®å½•
â”‚   è¿”å› mutations, queries åˆ—è¡¨       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“ å¯é…åˆä½¿ç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   drizzle_schema_analyzer           â”‚  â† åˆ†ææ•°æ®åº“ Schema
â”‚   è¿”å› tables, columns ä¿¡æ¯          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â†“ æä¾›è¡¨ç»“æ„ä¸Šä¸‹æ–‡
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ repository_implementation_generator â”‚  â† ç”Ÿæˆå®ç°ä»£ç 
â”‚   è¾“å‡º .ts.keep éª¨æ¶æ–‡ä»¶             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
