# æ–°å¢æ¨¡å—å·¥ä½œæµ

æœ¬æ–‡æ¡£æè¿°åœ¨ ego-mcp é¡¹ç›®ä¸­æ–°å¢ä¸šåŠ¡æ¨¡å—çš„æ ‡å‡†æµç¨‹ã€‚

## æ¦‚è¿°

é¡¹ç›®é‡‡ç”¨**åè°ƒè€…æ¨¡å¼ï¼ˆCoordinator Patternï¼‰** çš„æ¨¡å—åŒ–æ¶æ„ï¼š

- **åè°ƒè€…æœåŠ¡**ï¼šä½œä¸ºæ¨¡å—å¯¹å¤–çš„ç»Ÿä¸€å…¥å£ï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼Œä»…åšæµç¨‹ç¼–æ’
- **å­æœåŠ¡**ï¼šå„å¸å…¶èŒï¼Œå¤„ç†å•ä¸€èŒè´£çš„ä¸šåŠ¡é€»è¾‘
- **Resolver åˆ†å±‚**ï¼šQuery/Mutation å…¥å£è§£æå™¨ + ç±»å‹å­—æ®µè§£æå™¨ï¼ˆå»¶è¿Ÿè§£æï¼‰

### æ¨¡å—ç›®å½•ç»“æ„

```
src/server/modules/{{module_name}}/
â”œâ”€â”€ tokens.ts                    # æ¨¡å—å†…éƒ¨ DI ä»¤ç‰Œ
â”œâ”€â”€ {{module_name}}.module.ts    # æ¨¡å—æ³¨å†Œï¼ˆDI å®¹å™¨é…ç½®ï¼‰
â”œâ”€â”€ {{module_name}}.service.ts   # åè°ƒè€…æœåŠ¡ï¼ˆå¯¹å¤–ç»Ÿä¸€å…¥å£ï¼‰
â”œâ”€â”€ {{module_name}}.resolver.ts  # Resolver èšåˆå¯¼å‡º
â”œâ”€â”€ index.ts                     # æ¨¡å—å¯¼å‡º
â”œâ”€â”€ schema/                      # GraphQL Schemaï¼ˆæŒ‰åŠŸèƒ½æ‹†åˆ†ï¼‰
â”‚   â”œâ”€â”€ _index.graphql           # å…¥å£å®šä¹‰ï¼ˆQuery/Mutation æ‰©å±•ï¼‰
â”‚   â”œâ”€â”€ {{feature}}.graphql      # åŠŸèƒ½ç›¸å…³ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ ...
â”œâ”€â”€ service/                     # å­æœåŠ¡ï¼ˆå„å¸å…¶èŒï¼‰
â”‚   â”œâ”€â”€ index.ts                 # å­æœåŠ¡ç»Ÿä¸€å¯¼å‡º
â”‚   â”œâ”€â”€ {{feature}}.service.ts   # åŠŸèƒ½å­æœåŠ¡
â”‚   â””â”€â”€ ...
â””â”€â”€ resolver/                    # Resolver å®ç°ï¼ˆæŒ‰èŒè´£æ‹†åˆ†ï¼‰
    â”œâ”€â”€ index.ts                 # Resolver ç»Ÿä¸€å¯¼å‡º
    â”œâ”€â”€ query.resolver.ts        # Query å…¥å£è§£æå™¨
    â”œâ”€â”€ mutation.resolver.ts     # Mutation å…¥å£è§£æå™¨ï¼ˆå¦‚éœ€è¦ï¼‰
    â””â”€â”€ {{type}}.resolver.ts     # ç±»å‹å­—æ®µè§£æå™¨ï¼ˆå»¶è¿Ÿè§£æï¼‰
```

---

## å·¥ä½œæµæ­¥éª¤

### 1ï¸âƒ£ åˆ›å»ºæ¨¡å—ç›®å½•ç»“æ„

```bash
mkdir -p src/server/modules/{{module_name}}/{schema,service,resolver}
```

---

### 2ï¸âƒ£ å®šä¹‰æ¨¡å—å†…éƒ¨ DI ä»¤ç‰Œ

**æ–‡ä»¶**: `src/server/modules/{{module_name}}/tokens.ts`

> æ³¨æ„ï¼šä»¤ç‰Œå®šä¹‰åœ¨æ¨¡å—å†…éƒ¨ï¼Œä¸å†æ”¾åˆ°å…¨å±€ `core/di/tokens.ts`

```typescript
/**
 * {{ModuleName}} æ¨¡å— DI ä»¤ç‰Œ
 *
 * æ¨¡å—å†…éƒ¨ä½¿ç”¨çš„ä¾èµ–æ³¨å…¥ä»¤ç‰Œ
 */

export const {{MODULE_NAME}}_TOKENS = {
  /** æ ¸å¿ƒè§£ææœåŠ¡ï¼ˆå¦‚éœ€è¦ï¼‰ */
  ParsingService: Symbol.for('{{ModuleName}}.ParsingService'),

  /** åŠŸèƒ½å­æœåŠ¡ */
  {{Feature1}}Service: Symbol.for('{{ModuleName}}.{{Feature1}}Service'),
  {{Feature2}}Service: Symbol.for('{{ModuleName}}.{{Feature2}}Service'),
  // ... å…¶ä»–å­æœåŠ¡

  /** åè°ƒè€…æœåŠ¡ï¼ˆå¯¹å¤–ç»Ÿä¸€å…¥å£ï¼‰ */
  {{ModuleName}}Service: Symbol.for('{{ModuleName}}.{{ModuleName}}Service'),
} as const;

/** ä»¤ç‰Œç±»å‹ */
export type {{ModuleName}}TokenKey = keyof typeof {{MODULE_NAME}}_TOKENS;
export type {{ModuleName}}TokenValue = (typeof {{MODULE_NAME}}_TOKENS)[{{ModuleName}}TokenKey];
```

---

### 3ï¸âƒ£ åˆ›å»º GraphQL Schema

Schema æ–‡ä»¶æ”¾åœ¨æ¨¡å—å†…éƒ¨ `schema/` ç›®å½•ï¼ŒæŒ‰åŠŸèƒ½æ‹†åˆ†ï¼š

#### å…¥å£æ–‡ä»¶ `schema/_index.graphql`

```graphql
# {{ModuleName}} æ¨¡å—å…¥å£å®šä¹‰
# è®¾è®¡ç†å¿µï¼šé€šè¿‡ {{ModuleName}}Doc ç±»å‹å®ç°å»¶è¿Ÿè§£æï¼ŒæŒ‰éœ€æå–ä¸åŒä¿¡æ¯

extend type Query {
  """
  è§£æ {{ModuleName}} å†…å®¹ï¼Œè¿”å›æ–‡æ¡£å¯¹è±¡
  å…·ä½“æå–å“ªäº›ä¿¡æ¯ç”±å­å­—æ®µå†³å®šï¼Œå»¶è¿Ÿè§£æ
  """
  {{moduleName}}(content: String!): {{ModuleName}}Doc!

  """
  ä»æ–‡ä»¶è§£æ
  """
  {{moduleName}}File(path: String!): {{ModuleName}}Doc!
}

# å¦‚éœ€ Mutation
# extend type Mutation {
#   create{{ModuleName}}(input: {{ModuleName}}Input!): {{ModuleName}}Result!
# }

"""
{{ModuleName}} æ–‡æ¡£å¯¹è±¡ - æ‰€æœ‰è§£ææ“ä½œçš„æ ¹ç±»å‹
æ¯ä¸ªå­å­—æ®µç‹¬ç«‹è§£æï¼Œå®ç°å»¶è¿ŸåŠ è½½
"""
type {{ModuleName}}Doc {
  """
  åŸå§‹å†…å®¹
  """
  content: String!

  """
  æ–‡ä»¶è·¯å¾„ï¼ˆå¦‚æœä»æ–‡ä»¶è§£æï¼‰
  """
  filePath: String

  # ------ å­å­—æ®µï¼ˆå»¶è¿Ÿè§£æï¼‰ ------

  """
  åŠŸèƒ½1æ•°æ®
  """
  {{feature1}}: {{Feature1}}Type

  """
  åŠŸèƒ½2æ•°æ®
  """
  {{feature2}}(filter: String): [{{Feature2}}Type!]!
}
```

#### åŠŸèƒ½ç±»å‹æ–‡ä»¶ `schema/{{feature}}.graphql`

```graphql
# {{Feature}} ç±»å‹å®šä¹‰

"""
{{Feature}} æ•°æ®ç±»å‹
"""
type {{Feature}}Type {
  """
  å­—æ®µæè¿°
  """
  fieldName: String!

  """
  åµŒå¥—å­—æ®µ
  """
  nestedField: Int!
}
```

---

### 4ï¸âƒ£ è¿è¡Œ Codegen ç”Ÿæˆç±»å‹

```bash
bun run codegen
```

Codegen é…ç½®ä¼šæ‰«æ `src/server/modules/**/*.graphql`ï¼Œç”Ÿæˆï¼š

- `src/server/generated/graphql.ts` - TypeScript ç±»å‹å®šä¹‰
- `schema.graphql` - åˆå¹¶åçš„ Schemaï¼ˆä¾›å®¢æˆ·ç«¯ä½¿ç”¨ï¼‰

ç”Ÿæˆçš„ç±»å‹åŒ…æ‹¬ï¼š

- `{{ModuleName}}Doc` ç±»å‹
- `{{Feature}}Type` ç­‰ç±»å‹
- `QueryResolvers` / `MutationResolvers` è§£æå™¨ç±»å‹
- `{{ModuleName}}DocResolvers` ç±»å‹å­—æ®µè§£æå™¨ç±»å‹

---

### 5ï¸âƒ£ åˆ›å»ºå­æœåŠ¡

æ¯ä¸ªå­æœåŠ¡ä¸“æ³¨äºå•ä¸€èŒè´£ï¼Œé€šè¿‡æ„é€ å‡½æ•°æ³¨å…¥ä¾èµ–ã€‚

#### åŸºç¡€æœåŠ¡ç¤ºä¾‹ `service/parsing.service.ts`

```typescript
/**
 * è§£ææœåŠ¡
 *
 * èŒè´£ï¼šæ ¸å¿ƒè§£æèƒ½åŠ›ï¼Œç®¡ç†è§£æç¼“å­˜
 */

import { injectable } from '../../../core/di';

/** è§£æç»“æœç¼“å­˜ */
const parseCache = new Map<string, ParsedResult>();

@injectable()
export class ParsingService {
  /**
   * è·å–æˆ–åˆ›å»ºè§£æç»“æœï¼ˆå¸¦ç¼“å­˜ï¼‰
   */
  async getParseResult(content: string): Promise<ParsedResult> {
    const cached = parseCache.get(content);
    if (cached) {
      return cached;
    }

    const result = await this.parse(content);
    parseCache.set(content, result);
    return result;
  }

  /** æ‰§è¡Œè§£æ */
  private async parse(content: string): Promise<ParsedResult> {
    // å®ç°è§£æé€»è¾‘
  }
}
```

#### åŠŸèƒ½å­æœåŠ¡ç¤ºä¾‹ `service/{{feature}}.service.ts`

```typescript
/**
 * {{Feature}} æœåŠ¡
 *
 * èŒè´£ï¼šå¤„ç† {{Feature}} ç›¸å…³ä¸šåŠ¡é€»è¾‘
 */

import { inject, injectable } from '../../../core/di';
import type { {{Feature}}Type } from '../../../generated/graphql';
import { {{MODULE_NAME}}_TOKENS } from '../tokens';
import type { ParsingService } from './parsing.service';

@injectable()
export class {{Feature}}Service {
  constructor(
    @inject({{MODULE_NAME}}_TOKENS.ParsingService)
    private readonly parsing: ParsingService,
  ) {}

  /**
   * è·å– {{Feature}} æ•°æ®
   */
  async get(content: string, filter?: string): Promise<{{Feature}}Type[]> {
    const result = await this.parsing.getParseResult(content);
    // å®ç°ä¸šåŠ¡é€»è¾‘
    return this.transform(result, filter);
  }

  /** è½¬æ¢æ•°æ® */
  private transform(result: ParsedResult, filter?: string): {{Feature}}Type[] {
    // æ•°æ®è½¬æ¢é€»è¾‘
  }
}
```

#### å­æœåŠ¡å¯¼å‡º `service/index.ts`

```typescript
/**
 * æœåŠ¡å±‚å¯¼å‡º
 */

export { ParsingService } from './parsing.service';
export { {{Feature1}}Service } from './{{feature1}}.service';
export { {{Feature2}}Service } from './{{feature2}}.service';
// ... å…¶ä»–å­æœåŠ¡
```

---

### 6ï¸âƒ£ åˆ›å»ºåè°ƒè€…æœåŠ¡

**æ–‡ä»¶**: `{{module_name}}.service.ts`

åè°ƒè€…æœåŠ¡æ˜¯æ¨¡å—å¯¹å¤–çš„ç»Ÿä¸€å…¥å£ï¼Œå§”æ‰˜æ“ä½œåˆ°å„å­æœåŠ¡ã€‚

```typescript
/**
 * {{ModuleName}} æœåŠ¡åè°ƒè€…
 *
 * èŒè´£:
 * - ä½œä¸º {{ModuleName}} æ¨¡å—çš„ç»Ÿä¸€å…¥å£
 * - å§”æ‰˜å…·ä½“æ“ä½œåˆ°å„ä¸ªå­æœåŠ¡
 * - éµå¾ªåè°ƒè€…æ¨¡å¼ï¼Œä¸åŒ…å«ä¸šåŠ¡é€»è¾‘
 */

import { inject, injectable } from '../../core/di';
import type {
  {{Feature1}}Type,
  {{Feature2}}Type,
  // ... å…¶ä»–ç±»å‹
} from '../../generated/graphql';
import {
  {{Feature1}}Service,
  {{Feature2}}Service,
  ParsingService,
  // ... å…¶ä»–å­æœåŠ¡
} from './service';
import { {{MODULE_NAME}}_TOKENS } from './tokens';

/**
 * {{ModuleName}} æœåŠ¡åè°ƒè€…
 *
 * ä½œä¸ºå¯¹å¤–ç»Ÿä¸€å…¥å£ï¼Œå§”æ‰˜æ“ä½œåˆ°å„å­æœåŠ¡
 */
@injectable()
export class {{ModuleName}}Service {
  constructor(
    @inject({{MODULE_NAME}}_TOKENS.ParsingService)
    private readonly parsing: ParsingService,
    @inject({{MODULE_NAME}}_TOKENS.{{Feature1}}Service)
    private readonly {{feature1}}: {{Feature1}}Service,
    @inject({{MODULE_NAME}}_TOKENS.{{Feature2}}Service)
    private readonly {{feature2}}: {{Feature2}}Service,
    // ... å…¶ä»–å­æœåŠ¡
  ) {}

  /** ä»æ–‡ä»¶è¯»å–å†…å®¹ */
  async readFile(path: string): Promise<string> {
    return this.parsing.readFile(path);
  }

  /** è·å– {{Feature1}} æ•°æ® */
  async get{{Feature1}}(content: string): Promise<{{Feature1}}Type | null> {
    return this.{{feature1}}.get(content);
  }

  /** è·å– {{Feature2}} åˆ—è¡¨ */
  async get{{Feature2}}(content: string, filter?: string): Promise<{{Feature2}}Type[]> {
    return this.{{feature2}}.get(content, filter);
  }

  // ... å…¶ä»–å§”æ‰˜æ–¹æ³•
}
```

---

### 7ï¸âƒ£ åˆ›å»º Resolver

Resolver åˆ†å±‚è®¾è®¡ï¼šå…¥å£è§£æå™¨ + ç±»å‹å­—æ®µè§£æå™¨ã€‚

#### Query å…¥å£è§£æå™¨ `resolver/query.resolver.ts`

```typescript
/**
 * Query Resolvers - å…¥å£ç‚¹è§£æå™¨
 */

import type {
  {{ModuleName}}Doc,
  QueryResolvers,
} from '../../../generated/graphql';
import type { GraphQLContext } from '../../../infrastructure/graphql';
import type { ParsingService } from '../service';
import { {{MODULE_NAME}}_TOKENS } from '../tokens';

/**
 * ä»ä¸Šä¸‹æ–‡è·å–æœåŠ¡
 */
function getParsingService(context: GraphQLContext): ParsingService {
  return context.container.resolve<ParsingService>(
    {{MODULE_NAME}}_TOKENS.ParsingService,
  );
}

/**
 * Query Resolvers
 */
export const queryResolvers: QueryResolvers = {
  /**
   * è§£æå†…å®¹
   * è¿”å› stub å¯¹è±¡ï¼Œå­å­—æ®µçš„è§£æå™¨ä¼šæ‰§è¡Œå®é™…è§£æ
   */
  {{moduleName}}: (_parent, args, context): {{ModuleName}}Doc => {
    const { logger } = context;
    logger.info('è§£æ {{ModuleName}}', { contentLength: args.content.length });

    // è¿”å› stub å¯¹è±¡ï¼Œå­å­—æ®µæŒ‰éœ€å»¶è¿Ÿè§£æ
    return {
      content: args.content,
      filePath: null,
    } as {{ModuleName}}Doc;
  },

  /**
   * ä»æ–‡ä»¶è§£æ
   */
  {{moduleName}}File: async (_parent, args, context): Promise<{{ModuleName}}Doc> => {
    const { logger } = context;
    logger.info('è§£æ {{ModuleName}} æ–‡ä»¶', { path: args.path });

    const service = getParsingService(context);
    const content = await service.readFile(args.path);

    return {
      content,
      filePath: args.path,
    } as {{ModuleName}}Doc;
  },
};
```

#### ç±»å‹å­—æ®µè§£æå™¨ `resolver/{{module_name}}-doc.resolver.ts`

```typescript
/**
 * {{ModuleName}}Doc ç±»å‹è§£æå™¨
 *
 * æ¯ä¸ªå­—æ®µå¯¹åº”ä¸€ä¸ªç‹¬ç«‹çš„è§£ææ“ä½œï¼ŒæŒ‰éœ€æ‰§è¡Œ
 */

import type {
  {{Feature1}}Type,
  {{Feature2}}Type,
  {{ModuleName}}DocResolvers,
} from '../../../generated/graphql';
import type { GraphQLContext } from '../../../infrastructure/graphql';
import type { {{ModuleName}}Service } from '../{{module_name}}.service';
import { {{MODULE_NAME}}_TOKENS } from '../tokens';

/**
 * ä»ä¸Šä¸‹æ–‡è·å–åè°ƒè€…æœåŠ¡
 */
function get{{ModuleName}}Service(context: GraphQLContext): {{ModuleName}}Service {
  return context.container.resolve<{{ModuleName}}Service>(
    {{MODULE_NAME}}_TOKENS.{{ModuleName}}Service,
  );
}

/**
 * {{ModuleName}}Doc ç±»å‹çš„å­—æ®µè§£æå™¨
 */
export const {{moduleName}}DocResolvers: {{ModuleName}}DocResolvers = {
  /**
   * è·å– {{Feature1}}
   */
  {{feature1}}: async (parent, _args, context): Promise<{{Feature1}}Type | null> => {
    const service = get{{ModuleName}}Service(context);
    return service.get{{Feature1}}(parent.content);
  },

  /**
   * è·å– {{Feature2}} åˆ—è¡¨
   */
  {{feature2}}: async (parent, args, context): Promise<{{Feature2}}Type[]> => {
    const service = get{{ModuleName}}Service(context);
    return service.get{{Feature2}}(parent.content, args.filter ?? undefined);
  },

  // ... å…¶ä»–å­—æ®µè§£æå™¨
};
```

#### Resolver å¯¼å‡º `resolver/index.ts`

```typescript
/**
 * è§£æå™¨å±‚å¯¼å‡º
 */

export { {{moduleName}}DocResolvers } from './{{module_name}}-doc.resolver';
export { queryResolvers } from './query.resolver';
// export { mutationResolvers } from './mutation.resolver';
```

#### Resolver èšåˆ `{{module_name}}.resolver.ts`

```typescript
/**
 * {{ModuleName}} æ¨¡å— GraphQL Resolver èšåˆ
 *
 * è®¾è®¡ç†å¿µï¼šé€šè¿‡ {{ModuleName}}Doc ç±»å‹å®ç°å»¶è¿Ÿè§£æ
 * ç”¨æˆ·åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µï¼Œå¯¹åº”çš„è§£ææ“ä½œæ‰ä¼šæ‰§è¡Œ
 */

import type { Resolvers } from '../../generated/graphql';
import { {{moduleName}}DocResolvers, queryResolvers } from './resolver';

/**
 * å¯¼å‡ºèšåˆåçš„ Resolvers
 */
export const {{moduleName}}Resolvers: Resolvers = {
  Query: queryResolvers,
  {{ModuleName}}Doc: {{moduleName}}DocResolvers,
  // Mutation: mutationResolvers,
};
```

---

### 8ï¸âƒ£ åˆ›å»ºæ¨¡å—æ³¨å†Œ

**æ–‡ä»¶**: `{{module_name}}.module.ts`

```typescript
/**
 * {{ModuleName}} æ¨¡å—æ³¨å†Œ
 *
 * æ³¨å†Œæ‰€æœ‰ {{ModuleName}} ç›¸å…³æœåŠ¡åˆ° DI å®¹å™¨
 */

import { container } from '../../core/di';
import { {{ModuleName}}Service } from './{{module_name}}.service';
import {
  {{Feature1}}Service,
  {{Feature2}}Service,
  ParsingService,
  // ... å…¶ä»–å­æœåŠ¡
} from './service';
import { {{MODULE_NAME}}_TOKENS } from './tokens';

/**
 * æ³¨å†Œ {{ModuleName}} æ¨¡å—
 */
export function register{{ModuleName}}Module(): void {
  // æ³¨å†ŒåŸºç¡€æœåŠ¡
  container.registerSingleton({{MODULE_NAME}}_TOKENS.ParsingService, ParsingService);

  // æ³¨å†ŒåŠŸèƒ½å­æœåŠ¡
  container.registerSingleton({{MODULE_NAME}}_TOKENS.{{Feature1}}Service, {{Feature1}}Service);
  container.registerSingleton({{MODULE_NAME}}_TOKENS.{{Feature2}}Service, {{Feature2}}Service);
  // ... å…¶ä»–å­æœåŠ¡

  // æ³¨å†Œåè°ƒè€…æœåŠ¡ï¼ˆå¯¹å¤–ç»Ÿä¸€å…¥å£ï¼‰
  container.registerSingleton({{MODULE_NAME}}_TOKENS.{{ModuleName}}Service, {{ModuleName}}Service);
}
```

---

### 9ï¸âƒ£ åˆ›å»ºæ¨¡å—å¯¼å‡º

**æ–‡ä»¶**: `index.ts`

```typescript
/**
 * {{ModuleName}} æ¨¡å—å¯¼å‡º
 */

// æ¨¡å—æ³¨å†Œ
export { register{{ModuleName}}Module } from './{{module_name}}.module';

// Resolvers
export { {{moduleName}}Resolvers } from './{{module_name}}.resolver';

// åè°ƒè€…æœåŠ¡ï¼ˆå¯¹å¤–æ¥å£ï¼‰
export { {{ModuleName}}Service } from './{{module_name}}.service';

// DI ä»¤ç‰Œ
export { {{MODULE_NAME}}_TOKENS } from './tokens';

// å¯¼å‡ºå­æœåŠ¡ï¼ˆä¾›éœ€è¦ç»†ç²’åº¦æ§åˆ¶çš„åœºæ™¯ä½¿ç”¨ï¼‰
export {
  {{Feature1}}Service,
  {{Feature2}}Service,
  ParsingService,
} from './service';

// ç±»å‹ä» codegen ç”Ÿæˆçš„æ–‡ä»¶å¤ç”¨ï¼Œæ— éœ€é‡å¤å¯¼å‡º
```

---

### ğŸ”Ÿ æ³¨å†Œæ¨¡å—åˆ°ä¸»å…¥å£

**æ–‡ä»¶**: `src/server/modules/index.ts`

```typescript
import { {{moduleName}}Resolvers, register{{ModuleName}}Module } from './{{module_name}}';

/**
 * æ³¨å†Œæ‰€æœ‰ä¸šåŠ¡æ¨¡å—
 */
export function registerModules(): void {
  registerUserModule();
  registerGitModule();
  registerMarkdownModule();
  register{{ModuleName}}Module(); // â† æ·»åŠ æ¨¡å—æ³¨å†Œ
}

/**
 * åˆå¹¶åçš„ Resolvers
 */
export const resolvers: Resolvers = mergeResolvers(
  baseResolvers,
  userResolvers,
  gitResolvers,
  markdownResolvers,
  {{moduleName}}Resolvers, // â† æ·»åŠ  Resolvers
);
```

---

## éªŒè¯æ­¥éª¤

```bash
# 1. ç”Ÿæˆç±»å‹
bun run codegen

# 2. ç±»å‹æ£€æŸ¥
bun run typecheck

# 3. å¯åŠ¨æœåŠ¡å™¨
bun run start:server

# 4. è®¿é—® GraphQL Playground æµ‹è¯•
# http://localhost:4000/graphql
```

---

## å ä½ç¬¦è¯´æ˜

| å ä½ç¬¦            | è¯´æ˜                             | ç¤ºä¾‹                               |
| ----------------- | -------------------------------- | ---------------------------------- |
| `{{module_name}}` | kebab-case æ¨¡å—åï¼ˆç›®å½•/æ–‡ä»¶åï¼‰ | `markdown`, `git`, `commit`        |
| `{{moduleName}}`  | camelCase æ¨¡å—å                 | `markdown`, `git`, `commit`        |
| `{{ModuleName}}`  | PascalCase æ¨¡å—å                | `Markdown`, `Git`, `Commit`        |
| `{{MODULE_NAME}}` | å¤§å†™ä¸‹åˆ’çº¿æ¨¡å—å                 | `MARKDOWN`, `GIT`, `COMMIT`        |
| `{{feature}}`     | åŠŸèƒ½åï¼ˆcamelCaseï¼‰              | `frontmatter`, `headings`, `links` |
| `{{Feature}}`     | åŠŸèƒ½åï¼ˆPascalCaseï¼‰             | `Frontmatter`, `Headings`, `Links` |

---

## æ¶æ„è®¾è®¡åŸåˆ™

### åè°ƒè€…æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Resolver Layer                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Query        â”‚  â”‚ Mutation     â”‚  â”‚ TypeField    â”‚      â”‚
â”‚  â”‚ Resolver     â”‚  â”‚ Resolver     â”‚  â”‚ Resolver     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚                 â”‚                 â”‚
          â–¼                 â–¼                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Coordinator Service (åè°ƒè€…)                    â”‚
â”‚                                                              â”‚
â”‚   ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼Œä»…åšæµç¨‹ç¼–æ’ï¼Œå§”æ‰˜åˆ°å„å­æœåŠ¡                    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚              â”‚              â”‚              â”‚
       â–¼              â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parsing    â”‚ â”‚ Feature1   â”‚ â”‚ Feature2   â”‚ â”‚ Feature3   â”‚
â”‚ Service    â”‚ â”‚ Service    â”‚ â”‚ Service    â”‚ â”‚ Service    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    å­æœåŠ¡å±‚ï¼šå„å¸å…¶èŒï¼Œå¤„ç†å•ä¸€èŒè´£çš„ä¸šåŠ¡é€»è¾‘
```

### å»¶è¿Ÿè§£ææ¨¡å¼

```graphql
# å®¢æˆ·ç«¯åªæŸ¥è¯¢éœ€è¦çš„å­—æ®µï¼Œå¯¹åº”çš„è§£ææ“ä½œæ‰ä¼šæ‰§è¡Œ
query {
  markdown(content: "...") {
    # åªä¼šæ‰§è¡Œ frontmatter è§£æ
    frontmatter {
      exists
      data
    }
    # headingsã€codeBlocks ç­‰ä¸ä¼šæ‰§è¡Œ
  }
}
```

---

## æœ€ä½³å®è·µ

1. **ç±»å‹å¤ç”¨**: æ‰€æœ‰ç±»å‹å®šä¹‰åœ¨ GraphQL Schema ä¸­ï¼Œé€šè¿‡ codegen ç”Ÿæˆ TypeScript ç±»å‹ï¼ŒService/Resolver ç›´æ¥å¤ç”¨
2. **å»¶è¿Ÿè§£æ**: é€šè¿‡ç±»å‹å­—æ®µè§£æå™¨å®ç°æŒ‰éœ€åŠ è½½ï¼Œæå‡æ€§èƒ½
3. **åè°ƒè€…æ¨¡å¼**: åè°ƒè€…æœåŠ¡ä¸åŒ…å«ä¸šåŠ¡é€»è¾‘ï¼Œä»…åšæµç¨‹ç¼–æ’å’Œå§”æ‰˜
4. **å•ä¸€èŒè´£**: å­æœåŠ¡å„å¸å…¶èŒï¼Œæ¯ä¸ªæœåŠ¡åªå¤„ç†ä¸€ç§åŠŸèƒ½
5. **æ¨¡å—å†…èš**: DI ä»¤ç‰Œã€Schemaã€Serviceã€Resolver éƒ½åœ¨æ¨¡å—å†…éƒ¨ï¼Œå‡å°‘è·¨æ¨¡å—ä¾èµ–
6. **ä¸­æ–‡æ³¨é‡Š**: å…³é”®é€»è¾‘ä½¿ç”¨ä¸­æ–‡æ³¨é‡Šè¯´æ˜
7. **é›¶ any**: ç¦æ­¢ä½¿ç”¨ `any` ç±»å‹ï¼Œç¡®ä¿å®Œæ•´ç±»å‹å®‰å…¨
8. **ç¼“å­˜ç­–ç•¥**: åŸºç¡€è§£ææœåŠ¡ä½¿ç”¨ç¼“å­˜é¿å…é‡å¤è§£æ
