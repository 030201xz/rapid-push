# 热更新工作流 - App 测试

## 测试步骤

### 1. 打开 App
在 Android 设备上启动应用

### 2. 进入更新页面
切换到 "Updates" 标签页

### 3. 检查当前状态
查看版本信息区块:
- **运行时版本**: 1.0.0
- **更新 ID**: 当前版本 ID
- **渠道**: prod_demo_app...
- **上次检查**: 检查时间
- **待应用更新**: 是/否

### 4. 检查更新
点击 "检查更新" 按钮

**预期结果**:
- 状态变为 "⏳ 正在检查更新..."
- 然后变为 "🎉 发现新版本!"
- 显示新版本的 Update ID

### 5. 下载更新
点击 "下载更新" 按钮

**预期结果**:
- 状态变为 "⬇️ 正在下载..."
- 显示下载进度条(0% → 100%)
- 完成后变为 "✅ 更新已就绪"

### 6. 应用更新
点击 "立即应用" 按钮

**预期结果**:
- 弹出确认对话框
- 点击确认后 App 重启
- 重启后加载新版本

### 7. 验证更新
重启后检查:
- 更新 ID 已变更
- 待应用更新显示 "否"
- 功能正常

## 常见状态

### 正常流程
```
idle → checking → available → downloading → ready → applying → (重启)
```

### 无更新
```
idle → checking → idle (✓ 当前为最新版本)
```

### 错误处理
```
any → error (显示错误信息)
```

## 测试数据

本次测试更新信息:
- **Update ID**: `1412d967-ac74-40cc-8df0-c60de7c1ee24`
- **Runtime Version**: `1.0.0`
- **Build Number**: `2`
- **资源数量**: 31 个文件

## 问题排查

### 无法检查更新
- 检查网络连接
- 验证服务器地址
- 查看 App 日志

### 下载失败
- 检查资源 URL
- 验证资源哈希
- 查看服务器日志

### 应用失败
- 检查运行时版本兼容性
- 验证 bundle 完整性
- 查看错误日志
